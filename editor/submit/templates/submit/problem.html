{% extends 'submit/main.html' %}

{% block content %}
<h2>{{ problem.title }}</h2>
{{ problem.content | safe }}
<h2>Riešenie:</h2>
<form id="problem_form" method="post" action="/submit/problem/{{ problem.id }}/">
	{% csrf_token %}
    {% for row in rows %}
        <div class="input-group">
            <span class="input-group-addon line-number" id="basic-addon{{ row.order }}">{{ row.order }}</span>
            <input
                type="text"
                class="form-control"
                placeholder="Write some {{ row.get_lang_display }} code here"
                aria-label="Username"
                aria-describedby="basic-addon{{ row.order }}"
                value="{{ row.content | safe }}"
                name="row-{{ row.order }}"
                {% if readonly %}readonly=true{% endif %}
            >
            </input>
            <span class="input-group-addon language" id="basic-addon{{ row.order }}">{{ row.get_lang_display }}</span>
        </div>
    {% endfor %}
    <br/>
    <button type="submit" class="btn btn-success {% if readonly %}disabled{% endif %}" name="save">Save</button>
    <button type="submit" class="btn btn-primary {% if readonly %}disabled{% endif %}" name="save-submit">Save & Submit</button>
</form>
<table class="table hover">
    <thead>
        <tr>
            <th>Čas</th>
            <th>Stav</th>
        </tr>
    </thead>
    {% for submit in submits %}
    <tr class="{% if submit.status == response.OK or submit.status == response.REVIEWED %}
                success
                {% elif submit.status == response.SENDING_TO_JUDGE or submit.status == response.SENT_TO_JUDGE %}
                info
                {% elif submit.score > 0 %}
                warning
                {% else %}
                danger
                {% endif %}">
            <td>{{ submit.timestamp|date:"d.m.Y H:i T" }}</td>
            <td>{{ submit.get_status_display }}</td>
        </tr>
    {% endfor %}
</table>
{% endblock %}
